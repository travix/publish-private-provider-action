name: Publish Private Terraform Provider
description: Publishes a private terraform provider generated by goreleaser to the Terraform Cloud
author: Travix
inputs:
  access-token:
    required: true
    description: Terraform Cloud access token
  version:
    required: false
    description: Version of the provider to be published. Default to tag name if run on tag event, else throws an error
  dist-path:
    required: false
    description: Path to the dist folder generated by goreleaser
    default: dist
  gpg-key-id:
    required: false
    description: GPG key-id from terraform cloud to generate the new version. Default to first key-id found in [list-gpg-keys](https://developer.hashicorp.com/terraform/cloud-docs/api-docs/private-registry/gpg-keys#list-gpg-keys) API
  namespace:
    required: false
    description: Namespace of the provider. Default to GitHub org name
  provider-name:
    required: false
    description: Name of the provider. Default to repo name without 'terraform-provider-' prefix
runs:
  using: 'node16'
  main: 'dist/index.js'
